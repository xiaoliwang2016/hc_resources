(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c0b148a"],{"533d":function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[o("div",{staticClass:"head-r"},[o("el-button",{attrs:{type:"info",size:"small"},on:{click:function(){e.showDialog()}}},[e._v("添加角色")]),e._v(" "),o("el-select",{attrs:{placeholder:"显示条数",size:"small"},model:{value:e.pageSize,callback:function(t){e.pageSize=t},expression:"pageSize"}},[o("el-option",{attrs:{label:"10条",value:10}}),e._v(" "),o("el-option",{attrs:{label:"20条",value:20}}),e._v(" "),o("el-option",{attrs:{label:"50条",value:50}})],1),e._v(" "),o("el-select",{attrs:{placeholder:"排序方式",size:"small",disabled:!0},model:{value:e.orderBy,callback:function(t){e.orderBy=t},expression:"orderBy"}},[o("el-option",{attrs:{label:"人员数量",value:1}}),e._v(" "),o("el-option",{attrs:{label:"创建时间",value:2}})],1)],1),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleList,"cell-class-name":"cell"}},[o("el-table-column",{attrs:{prop:"role_name",label:"角色名称",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{prop:"role_desc",label:"角色描述",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{prop:"count",label:"成员数量"}}),e._v(" "),o("el-table-column",{attrs:{prop:"status",label:"是否启用"}}),e._v(" "),o("el-table-column",{attrs:{prop:"update_time",label:"添加时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.parseTime(t.row.update_time))+"\n            ")]}}])}),e._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"}},[e._v("查看")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.toAuthorize(t.row)}}},[e._v("权限设置")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){e.showDialog(t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),o("el-dialog",{attrs:{title:e.formTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{attrs:{model:e.roleForm}},[o("el-form-item",{attrs:{label:"角色名称","label-width":"80px"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.roleForm.role_name,callback:function(t){e.$set(e.roleForm,"role_name",t)},expression:"roleForm.role_name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"角色描述","label-width":"80px"}},[o("el-input",{attrs:{type:"textarea",rows:4,max:50,resize:"none",placeholder:"请输入内容"},model:{value:e.roleForm.role_desc,callback:function(t){e.$set(e.roleForm,"role_desc",t)},expression:"roleForm.role_desc"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(){e.createOrUpdate()}}},[e._v("保 存")])],1)],1)],1)},r=[],a=o("db72"),i=o("ed08"),n=o("cc5e"),s={name:"AdminRole",data:function(){return{roleList:[],roleForm:{},dialogFormVisible:!1,formTitle:"",pageSize:20,orderBy:1}},mounted:function(){this.init()},methods:{parseTime:i["d"],init:function(){var e=this;return new Promise(function(t){n["d"]({theme_id:e.$store.state.admin.themeInfo.id,role_group:1}).then(function(o){e.roleList=o.data,t()})})},showDialog:function(e){e?(this.roleForm={id:e.id,role_name:e.role_name,role_desc:e.role_desc},this.formTitle="编辑角色:"+e.role_name):(this.roleForm={role_name:"",role_desc:""},this.formTitle="添加角色"),this.dialogFormVisible=!0},createOrUpdate:function(){var e=this;if(!this.roleForm.role_name)return this.$message({message:"角色名称不能为空",type:"warning"});var t=Object(a["a"])({},this.roleForm,{theme_id:this.$store.state.admin.themeInfo.id,role_group:1,status:1});this.loading=this.$loading({lock:!0}),n["a"](t).then(function(){e.dialogFormVisible=!1,e.init().then(function(){e.loading.close(),e.$message({message:"操作成功",type:"success"})})}).catch(function(t){e.loading.close()})},toAuthorize:function(e){this.$router.push({path:"/admin/setting/roleAuth",query:{name:e.role_name,id:e.id}})}}},c=s,u=o("2877"),d=Object(u["a"])(c,l,r,!1,null,null,null);t["default"]=d.exports},cc5e:function(e,t,o){"use strict";o.d(t,"d",function(){return r}),o.d(t,"a",function(){return a}),o.d(t,"c",function(){return i}),o.d(t,"b",function(){return n}),o.d(t,"e",function(){return s});var l=o("b775");function r(e){return Object(l["a"])({url:"/admin/role/list",method:"get",params:e})}function a(e){return Object(l["a"])({url:"/admin/role/addOrUpdate",method:"post",data:e})}function i(e){return Object(l["a"])({url:"/admin/role/listResources",method:"get",params:e})}function n(e){return Object(l["a"])({url:"/admin/role/assignToUser",method:"post",data:e})}function s(){return Object(l["a"])({url:"/admin/role/listUser",method:"get",params:params})}}}]);