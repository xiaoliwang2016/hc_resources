(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d2fbc0d"],{"3ee5":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"head-r"},[s("el-button",{attrs:{type:"info",size:"small"},on:{click:function(){e.showDialog(1)}}},[e._v("添加用户")]),e._v(" "),s("el-select",{attrs:{placeholder:"显示条数",size:"small"},model:{value:e.pageSize,callback:function(t){e.pageSize=t},expression:"pageSize"}},[s("el-option",{attrs:{label:"10条",value:10}}),e._v(" "),s("el-option",{attrs:{label:"20条",value:20}}),e._v(" "),s("el-option",{attrs:{label:"50条",value:50}})],1),e._v(" "),s("el-select",{attrs:{placeholder:"排序方式",size:"small",disabled:!0},model:{value:e.orderBy,callback:function(t){e.orderBy=t},expression:"orderBy"}},[s("el-option",{attrs:{label:"登录时间",value:1}}),e._v(" "),s("el-option",{attrs:{label:"创建时间",value:2}})],1)],1),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList,"cell-class-name":"cell"}},[s("el-table-column",{attrs:{prop:"user_no",width:"110px",label:"工号"}}),e._v(" "),s("el-table-column",{attrs:{prop:"user_name",label:"姓名"}}),e._v(" "),s("el-table-column",{attrs:{prop:"company_desc",label:"公司"}}),e._v(" "),s("el-table-column",{attrs:{prop:"department_desc",label:"部门"}}),e._v(" "),s("el-table-column",{attrs:{prop:"email",width:"80px",label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("el-switch",{attrs:{value:1==e.row.status,"active-color":"#13ce66","inactive-color":"#ff4949"}})]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"last_login",label:"最后登录时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.parseTime(t.row.update_time,"{y}-{m}-{d}"))+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"update_time",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.parseTime(t.row.update_time,"{y}-{m}-{d}"))+"\n            ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"260px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"identify",rawName:"v-identify",value:{name:"assign_resources_user"},expression:"{name: 'assign_resources_user'}"}],attrs:{type:"success",size:"mini"},on:{click:function(){return e.changePermission(t.row)}}},[e._v("\n                    权限设置\n                ")]),e._v(" "),s("el-button",{directives:[{name:"identify",rawName:"v-identify",value:{name:"edit_user"},expression:"{name: 'edit_user'}"}],attrs:{type:"primary",size:"mini"},on:{click:function(){return e.showDialog(2,t.row)}}},[e._v("\n                    编辑\n                ")]),e._v(" "),s("el-button",{directives:[{name:"identify",rawName:"v-identify",value:{name:"delete_user"},expression:"{name: 'delete_user'}"}],attrs:{type:"warning",size:"mini"},on:{click:function(){return e.remove(t.row.id)}}},[e._v("\n                    删除\n                ")])]}}])})],1),e._v(" "),s("el-dialog",{attrs:{title:e.formTitle,visible:e.dialogFormVisible,width:"400px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"userForm",attrs:{model:e.userForm,"label-width":"80px",width:"240px"}},[s("el-form-item",{attrs:{label:"员工工号"}},[s("el-row",{attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:14}},[s("el-input",{attrs:{disabled:e.existed},model:{value:e.userForm.user_no,callback:function(t){e.$set(e.userForm,"user_no",t)},expression:"userForm.user_no"}})],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("el-button",{attrs:{type:"text",disabled:e.existed},on:{click:e.search}},[e._v("搜索")])],1),e._v(" "),s("el-col",{attrs:{span:3}},[s("el-button",{attrs:{type:"text",disabled:"edit"==e.operation},on:{click:e.clear}},[e._v("清空")])],1)],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"员工姓名"}},[s("el-input",{attrs:{disabled:""},model:{value:e.userForm.user_name,callback:function(t){e.$set(e.userForm,"user_name",t)},expression:"userForm.user_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"所属公司"}},[s("el-input",{attrs:{disabled:""},model:{value:e.userForm.company_desc,callback:function(t){e.$set(e.userForm,"company_desc",t)},expression:"userForm.company_desc"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"邮箱地址"}},[s("el-input",{model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"所属部门"}},[s("el-input",{attrs:{disabled:""},model:{value:e.userForm.department_desc,callback:function(t){e.$set(e.userForm,"department_desc",t)},expression:"userForm.department_desc"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"岗位"}},[s("el-input",{attrs:{disabled:""},model:{value:e.userForm.job_desc,callback:function(t){e.$set(e.userForm,"job_desc",t)},expression:"userForm.job_desc"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"登录密码"}},[s("el-input",{model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认密码"}},[s("el-input",{model:{value:e.userForm.passwordRepeat,callback:function(t){e.$set(e.userForm,"passwordRepeat",t)},expression:"userForm.passwordRepeat"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary",disabled:!e.existed},on:{click:function(){e.submitForm("userForm")}}},[e._v("保 存")])],1)],1)],1)},a=[],o=s("db72"),n=(s("6b54"),s("c24f")),i=s("ed08"),l={name:"User",data:function(){return{userList:[],pageSize:20,orderBy:1,formTitle:"",dialogFormVisible:!1,userForm:{},existed:!1,operation:""}},mounted:function(){this.render()},methods:{parseTime:i["d"],render:function(){var e=this;n["e"]({theme_id:this.$store.state.user.themeInfo.id}).then(function(t){e.userList=t.data})},showDialog:function(e,t){1==e?(this.dialogFormVisible=!0,this.formTitle="新增员工",this.operation="create",this.clear()):2==e&&(this.formTitle="编辑员工信息",this.operation="edit",t.password="",t.passwordRepeat="",this.userForm=Object(o["a"])({},t),this.existed=!0,this.dialogFormVisible=!0)},changePermission:function(e){this.$router.push({path:"/admin/menu/permission/userAuth",query:{name:e.user_name,id:e.id}})},submitForm:function(e){var t=this;if(this.userForm.password!=this.userForm.passwordRepeat||""==this.userForm.password)return this.$message({message:"密码不能为空，切两次输入密码必须一致",type:"warning"});if(this.loading=this.$loading({lock:!0}),"create"==this.operation){var s=Object(o["a"])({},this.userForm,{status:1,theme_id:this.$store.state.user.themeInfo.id});n["a"](s).then(function(e){t.dialogFormVisible=!1,t.render().then(function(){t.$message({message:"用户创建成功",type:"success"}),t.loading.close()})}).catch(function(){t.loading.close()})}else"edit"==this.operation&&n["g"](this.userForm).then(function(e){t.dialogFormVisible=!1,t.render().then(function(){t.$message({message:"员工信息更新成功",type:"success"}),t.loading.close()})}).catch(function(e){t.loading.close()})},search:function(){var e=this;n["f"]({user_no:this.userForm.user_no}).then(function(t){var s=t.data;s?(e.existed=!0,e.userForm.user_name=s.SNAME,e.userForm.department=s.ZZ_SIJI,e.userForm.department_desc=s.ZZ_SIJI_DESC,e.userForm.company=s.BUKRS,e.userForm.company_desc=s.BUKRS_DESC,e.userForm.job=s.PLANS,e.userForm.job_desc=s.PLANS_DESC):e.$message({message:"系统中找不到该用户",type:"warning"})})},clear:function(){this.existed=!1,this.userForm={user_no:"",user_name:"",email:null,department:"",password:"",passwordRepeat:"",remark:"",employee_id:""}}}},u=l,c=(s("f0d0"),s("2877")),m=Object(c["a"])(u,r,a,!1,null,null,null);t["default"]=m.exports},"95b2":function(e,t,s){},c24f:function(e,t,s){"use strict";s.d(t,"e",function(){return a}),s.d(t,"a",function(){return o}),s.d(t,"g",function(){return n}),s.d(t,"b",function(){return i}),s.d(t,"c",function(){return l}),s.d(t,"d",function(){return u}),s.d(t,"f",function(){return c});var r=s("b775");function a(e){return Object(r["a"])({url:"/admin/user/list",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/admin/user/add",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/admin/user/update",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/admin/user/listResources",method:"get",params:e})}function l(e){return Object(r["a"])({url:"/admin/user/listRole",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/home/user/listTheme",method:"get",params:e})}function c(e){return Object(r["a"])({url:"/admin/employee/search",method:"get",params:e})}},f0d0:function(e,t,s){"use strict";var r=s("95b2"),a=s.n(r);a.a}}]);