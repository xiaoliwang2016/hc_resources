(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e69d9aa0"],{"0880":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=this,n=t.$createElement,r=t._self._c||n;return r("div",[r("div",{staticClass:"head"},[t._v("当前角色："+t._s(t.roleName))]),t._v(" "),r("el-tree",{staticClass:"body",attrs:{data:t.resourcesTree,"show-checkbox":"","default-expand-all":!0,"default-checked-keys":t.initResources,"node-key":"id"},on:{check:t.clickHandler},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var n=e.data;return r("span",{staticClass:"custom-tree-node"},[r("span",[t._v(t._s(n.menu_title))])])}}])}),t._v(" "),r("div",{staticClass:"foot"},[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),r("el-button",{attrs:{size:"small"},on:{click:function(){e.$router.go(-1)}}},[t._v("返回")])],1)],1)},s=[],a=(n("7f7f"),n("cc5e")),o=n("63e8"),c={data:function(){return{roleName:"",resources:[],resourcesTree:[],selectedArr:[],initResources:[]}},mounted:function(){this.roleName=this.$route.query.name,this.render()},methods:{render:function(){var e=this;Object(o["e"])({theme_id:this.$store.state.user.themeInfo.id,tree:1}).then(function(t){e.resourcesTree=t.data}),a["c"]({role_id:this.$route.query.id}).then(function(t){var n=[],r=[];t.data.map(function(e){3==e.type&&n.push(e.id),r.push(e.id)}),e.initResources=n,e.selectedArr=r}),Object(o["e"])({theme_id:this.$store.state.user.themeInfo.id}).then(function(t){e.resources=t.data})},clickHandler:function(e,t){this.selectedArr=t.checkedKeys.concat(t.halfCheckedKeys)},save:function(){var e=this;this.loading=this.$loading({lock:!0}),Object(o["b"])({role_id:this.$route.query.id,resources_id:this.selectedArr}).then(function(t){e.loading.close(),e.$message({message:"权限设置成功",type:"success"}),e.$router.go(-1)}).catch(function(){e.loading.close(),e.$message({message:"请求失败",type:"warning"})})}}},u=c,i=(n("ab1e"),n("2877")),d=Object(i["a"])(u,r,s,!1,null,"10b070b2",null);t["default"]=d.exports},"38a8":function(e,t,n){},"63e8":function(e,t,n){"use strict";n.d(t,"e",function(){return s}),n.d(t,"a",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return u});var r=n("b775");function s(e){return Object(r["a"])({url:"/admin/resources/list",method:"get",params:e})}function a(e){return Object(r["a"])({url:"/admin/resources/addOrUpdate",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/admin/resources/delete",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/admin/resources/assignToRole",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/admin/resources/assignToUser",method:"post",data:e})}},ab1e:function(e,t,n){"use strict";var r=n("38a8"),s=n.n(r);s.a},cc5e:function(e,t,n){"use strict";n.d(t,"d",function(){return s}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return c}),n.d(t,"e",function(){return u});var r=n("b775");function s(e){return Object(r["a"])({url:"/admin/role/list",method:"get",params:e})}function a(e){return Object(r["a"])({url:"/admin/role/addOrUpdate",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/admin/role/listResources",method:"get",params:e})}function c(e){return Object(r["a"])({url:"/admin/role/assignToUser",method:"post",data:e})}function u(){return Object(r["a"])({url:"/admin/role/listUser",method:"get",params:params})}}}]);